<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Chris Perks Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Chris Perks Blog Atom Feed"><title data-react-helmet="true">Sitecore Search Highlighting with Solr - the highlights | Chris Perks</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Sitecore Search Highlighting with Solr - the highlights | Chris Perks"><meta data-react-helmet="true" name="description" content="In this post"><meta data-react-helmet="true" property="og:description" content="In this post"><meta data-react-helmet="true" property="og:url" content="https://chrisperks.github.io/solr_highlights"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://chrisperks.github.io/solr_highlights"><link rel="stylesheet" href="/styles.3751d533.css">
<link rel="preload" href="/styles.3f2301b0.js" as="script">
<link rel="preload" href="/runtime~main.1d9b0921.js" as="script">
<link rel="preload" href="/main.449c35dc.js" as="script">
<link rel="preload" href="/1.5c7df7a8.js" as="script">
<link rel="preload" href="/2.20890b9b.js" as="script">
<link rel="preload" href="/32.39524d8f.js" as="script">
<link rel="preload" href="/935f2afb.269e32e0.js" as="script">
<link rel="preload" href="/17896441.a2c1466a.js" as="script">
<link rel="preload" href="/98863b59.43b30c79.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Chris Perks</strong></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Chris Perks</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">_</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">Home</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!"> 2021</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sitecore_deploy_to_kubernetes_eks">Deploy Sitecore 10 to Kubernetes with AWS EKS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sitecore_sustainability_benefits">Sustainable Sitecore - reducing CO2 emissions in your Sitecore stack</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!"> 2020</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/search_engine_not_database">When Does A Search Database Become A Search Engine?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!"> 2019</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/custom_solr_index">Create a custom Solr index in Sitecore 9</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!"> 2018</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/xconnect_error">xConnect error when using Deploy Marketing Definitions tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/xconnect_local_machine">Enable xConnect on a local developer machine</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/slow_renderings">Hundreds of renderings? Your first-page-load could be sloooow</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/solr_highlights">Sitecore Search Highlighting with Solr - the highlights</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/partial_view_not_found">Sitecore 9  - The partial view was not found or no view engine supports the searched locations.</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/contentsearch_quirks">Sitecore 9 - ContentSearch Solr query quirks with spaces and wildcards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/2018_solr_error">Sitecore Solr Error - Processing Field Name. Resolving Multiple Field found on Solr Field Map. No matching template field on index field name, return type ‚ÄòString‚Äô and field type ‚Äù</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/unicorn_configs">Digging into Unicorn configs in Sitecore Habitat</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/missing_uniquekey">Sitecore Solr setup - Document is missing mandatory uniqueKey field id</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!"> 2017</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/lucene_explain">Explaining Lucene explain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sitecore_analyzers">Visualising Sitecore Analyzers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/elasticon">Elasticon London 2017 (for a Sitecore developer)</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/patching_sitecore_commands_config">Patching the Sitecore Commands.config file</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/workaround_missing_viewdata_sitecore_mvc">A workaround for missing ViewData in Sitecore MVC</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/finding_action_name_from_mvc_processor">Finding the current Action name from an MVC pipeline processor</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/returning_json_errors_from_sitecore_mvc_controllers">Returning JSON errors from Sitecore MVC controllers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/could_not_find_process_pipeline">Error - Could not find method Process.Pipeline</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sitecore_mvc_internals">Sitecore MVC Internals - IControllerActivator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/sitecore_mvc_internals_factory">Sitecore MVC internals - SitecoreControllerFactory</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!"> 2016</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/async_functionality_testing_with_xunit">C# Async functionality testing with xUnit</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Sitecore Search Highlighting with Solr - the highlights</h1></header><div class="markdown"><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="in-this-post"></a>In this post<a class="hash-link" href="#in-this-post" title="Direct link to heading">#</a></h4><p>Examples of how to get going with search result highlighting, using the Sitecore ContentSearch API and Solr</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="what-does-highlighting-look-like"></a>What does highlighting look like?<a class="hash-link" href="#what-does-highlighting-look-like" title="Direct link to heading">#</a></h4><p>Solr‚Äôs highlighting system is extremely powerful. A simple use-case is to show the part of the document which matched a user‚Äôs search terms. We call this part a snippet. We can even supply some HTML to wrap the matching terms:</p><p><strong>Search</strong>: healthy
<strong>Wrap with</strong>: <em> </em>
<strong>Snippet</strong>: The <em>healthy</em> workplace toolkits support you either as a health care employer..</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="code-a-basic-search"></a>Code: A Basic Search<a class="hash-link" href="#code-a-basic-search" title="Direct link to heading">#</a></h4><p>Our documents have a field called ‚ÄòSummary‚Äô. Sitecore and the ContentSearch API don‚Äôt know about this field by default, so we create a custom SearchResultItem class to include the field in our search results:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using System.Runtime.Serialization;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using Sitecore.ContentSearch;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using Sitecore.ContentSearch.SearchTypes;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public class SearchResultWithSummary : SearchResultItem</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [IndexField(&quot;summary_t&quot;)]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    [DataMember]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    public virtual string Summary { get; set; }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Let‚Äôs search for any documents with the word healthy in the Summary field. Note that highlighting is currently only supported when we search directly through SolrNet, so we‚Äôll construct the query that way.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const string searchField = &quot;summary_t&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const string searchValue = &quot;healthy&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var index = ContentSearchManager.GetIndex(string.Format(&quot;sitecore_{0}_index&quot;, Sitecore.Context.Database.Name));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using (var context = index.CreateSearchContext())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var results = context.Query(new SolrQueryByField(searchField, searchValue), new QueryOptions());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    foreach (var result in results)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        @result.Summary</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                // Results:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // - The healthy workplace toolkits support you either as a health care employer, RCN workplace representative, employment agency or host organisation to create healthy working environments.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // - Engaging families, communities and schools to change the outlook of a generation. The Healthy Weight Commitment Foundation is a broad-based, not-for-profit organization whose mission is to help reduce obesity.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        // - People who are homeless are more likely than the general population to have poor health. Through our Healthy Futures project, we help homeless people when they are admitted to hospital.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="code-lets-add-highlighting"></a>Code: Let‚Äôs add highlighting!<a class="hash-link" href="#code-lets-add-highlighting" title="Direct link to heading">#</a></h4><p>We populate a <code>QueryOptions</code> object with a <code>HighlightingParameters</code> configuration, and pass this in when creating our query. We specify (Field) the field to include in the highlight snippet returned by Solr, (<code>BeforeTer</code>) the token to place before our matched terms, and (<code>AfterTerm</code>) the token to place after the matched terms.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">const string searchField = &quot;summary_t&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">const string searchValue = &quot;healthy&quot;;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var queryOptions = new QueryOptions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Highlight = new HighlightingParameters</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Fields = new[] { searchField },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        BeforeTerm = &quot;&lt;em&gt;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        AfterTerm = &quot;&lt;/em&gt;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now, let‚Äôs execute our query, passing in the <code>queryOptions</code> object. The results object we get back now contains a populated Highlights collection.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var index = ContentSearchManager.GetIndex(string.Format(&quot;sitecore_{0}_index&quot;, Sitecore.Context.Database.Name));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">using (var context = index.CreateSearchContext())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    var results = context.Query&lt;SearchResultWithSummary&gt;(new SolrQueryByField(searchField, searchValue), queryOptions);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    foreach (var result in results)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        var highlights = results.Highlights[result.Fields[&quot;_uniqueid&quot;].ToString()];</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        if (highlights.Any())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;ul&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                @foreach (var highlight in highlights)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;li style=&quot;color: #696969&quot;&gt;@result.Name&lt;/li&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    //The Healthy Workplace Toolkits</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &lt;li&gt;@Html.Raw(string.Join(&quot;,&quot;, highlight.Value))&lt;/li&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    // - The &lt;em&gt;healthy&lt;/em&gt; workplace toolkits support you either as a health care employer, RCN workplace representative, employment agency or host organisation to create &lt;em&gt;healthy&lt;/em&gt; working environments.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            &lt;/ul&gt;        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="controlling-the-size-of-the-snippet"></a>Controlling the size of the snippet<a class="hash-link" href="#controlling-the-size-of-the-snippet" title="Direct link to heading">#</a></h4><p>Solr allow us to pass in a parameter, <code>Fragsize</code>, to control the length of the snippet returned to us. I recommend playing around with this to suit your needs.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var queryOptions = new QueryOptions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Highlight = new HighlightingParameters</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Fields = new[] { searchField },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        BeforeTerm = &quot;&lt;em&gt;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        AfterTerm = &quot;&lt;/em&gt;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Fragsize = 30</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// - The &lt;em&gt;healthy&lt;/em&gt; workplace toolkits support</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="a-choice-of-highlighters"></a>A choice of highlighters!<a class="hash-link" href="#a-choice-of-highlighters" title="Direct link to heading">#</a></h4><p>Solr supports different highlighters ‚Äì take a look at the ‚ÄúChoosing a Highlighter‚Äù section in the Solr documentation: <a href="https://lucene.apache.org/solr/guide/6_6/highlighting.html" target="_blank" rel="noopener noreferrer">https://lucene.apache.org/solr/guide/6_6/highlighting.html</a></p><p>The newest, shiniest highlighter (which shipped with Solr 6.4) is the Unified Highlighter (<a href="https://lucene.apache.org/solr/guide/6_6/highlighting.html#Highlighting-TheUnifiedHighlighter" target="_blank" rel="noopener noreferrer">https://lucene.apache.org/solr/guide/6_6/highlighting.html#Highlighting-TheUnifiedHighlighter</a>). By using this highlighter instead, we can remove the <code>Fragsize</code> parameter and instead get back a whole sentance, containing our highlighted terms. We have to add another parameter to the <code>QueryOptions</code> object, <code>ExtraParams</code>, to tell Solr which highlighter to use:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var queryOptions = new QueryOptions</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    Highlight = new HighlightingParameters</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Fields = new[] { searchField },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        BeforeTerm = &quot;&lt;em&gt;&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        AfterTerm = &quot;&lt;/em&gt;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ExtraParams = new List&lt;KeyValuePair&lt;string, string&gt;&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        new KeyValuePair&lt;string, string&gt;(&quot;hl.method&quot;, &quot;unified&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">};</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// - Through our &lt;em&gt;healthy&lt;/em&gt; Futures project, we help homeless people when they are admitted to hospital.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="can-i-use-linq"></a>Can I use Linq?<a class="hash-link" href="#can-i-use-linq" title="Direct link to heading">#</a></h4><p>To make use of the <code>QueryOptions</code> object, we have to query directly through SolrNet. Losing our fancy ContentSearch Linq capabilities is a big deal! Here‚Äôs a not-so-great workaround to get it back. We serialize the Linq query to a string, then use it to create a native SolrNet query, attaching our QueryOptions once again.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-csharp codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var query = context.GetQueryable().Where(x =&gt; x.Summary.Contains(searchValue));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var solrQuery = new SolrQuery(((IHasNativeQuery)query).Query.ToString());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var results = context.Query(solrQuery, queryOptions);</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="feedback"></a>Feedback<a class="hash-link" href="#feedback" title="Direct link to heading">#</a></h4><p>I‚Äôd love to hear nicer ways of working with Linq and Highlighting ‚Äì please let me know any work you‚Äôve done in this area!</p><p>Full gist of this functionality here: <a href="https://gist.github.com/christofur/178b3a8ff93d6a899c00b15dcdd49966" target="_blank" rel="noopener noreferrer">https://gist.github.com/christofur/178b3a8ff93d6a899c00b15dcdd49966</a></p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/slow_renderings"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Hundreds of renderings? Your first-page-load could be sloooow</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/partial_view_not_found"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sitecore 9  - The partial view was not found or no view engine supports the searched locations. ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">My Links</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.linkedin.com/in/christofr/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://github.com/christofur" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">¬© 2021 Chris Perks</div></div></div></footer></div>
<script src="/styles.3f2301b0.js"></script>
<script src="/runtime~main.1d9b0921.js"></script>
<script src="/main.449c35dc.js"></script>
<script src="/1.5c7df7a8.js"></script>
<script src="/2.20890b9b.js"></script>
<script src="/32.39524d8f.js"></script>
<script src="/935f2afb.269e32e0.js"></script>
<script src="/17896441.a2c1466a.js"></script>
<script src="/98863b59.43b30c79.js"></script>
</body>
</html>